<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="ractive-decorators-popper demo page">
    <meta name="author" content="kouts">

    <title>ractive-decorators-popper demo page</title>

    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <!-- Prism -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism.min.css">

    <!-- Custom styles -->
    <style>
        body {
            padding-top: 5rem;
        }
        .mb40 {
            margin-bottom: 40px;
        }
        .code-comment {
            padding-left:20px;
        }
        .jumbotron {
            padding: 3rem 1.5rem;
            text-align: center;
        }
        .navbar-nav-svg {
            display: inline-block;
            width: 1.5rem;
            height: 1.5rem;
            vertical-align: text-top;
        }
        :not(pre) > code[class*="language-"], pre[class*="language-"] {
            background-color: #f7f7f9;
        }
        /* Needed for popover example */
        .popover[popper] {display: none;}
        .popover[popper].show {display: block;}
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
        <a class="navbar-brand" href="javascript:;">ractive-decorators-popper</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <!--
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                -->
            </ul>
            <form class="form-inline">
                <a class="nav-link" style="color:#fff;" href="https://github.com/kouts/ractive-decorators-popper" target="_blank" rel="noopener" aria-label="ractive-decorators-popper GitHub">
                    <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false"><title>ractive-decorators-popper at GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"/></svg>
                </a>
                <a href="https://github.com/kouts/ractive-decorators-popper/archive/master.zip" class="btn btn-outline-success">Download</a>
            </form>
        </div>
    </nav>

    <div class="container" id="app"></div>

    <script type="text/template" id="app-template">

        <div class="jumbotron">
            <h1>ractive-decorators-popper</h1>
            <p class="lead">A <a href="https://popper.js.org/" target="_blank">popper.js</a> decorator for Ractive</p>
            <p class="mb-0">This page includes basic documentation and examples for the ractive-decorators-popper decorator</p>
            <p>ractive-decorators-popper decorator is designed with <strong>Bootstrap 4</strong> CSS integration in mind (dropdowns and popovers), but it should work fine for other use cases too</p>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <h2>Quick demo</h2>
            </div>
        </div>

        <div class="row mb40">
            <div class="col-sm-4">
                <label>Dropdown with div &gt; a structure</label>
                <div class="dropdown mb-2 mb-0-sm" as-popper="{placement: 'bottom-start'}">
                    <button class="btn btn-primary dropdown-toggle" popper-trigger type="button">
                       Primary <span class="caret"></span>
                    </button>
                    <div class="dropdown-menu" popper>
                        <a href="javascript:;" class="dropdown-item" on-click="@global.alert('Action')">Action</a>
                        <a href="javascript:;" class="dropdown-item" on-click="@global.alert('Another action')">Another action</a>
                        <a href="javascript:;" class="dropdown-item" on-click="@global.alert('Something else here')">Something else here</a>
                        <div class="dropdown-divider"></div>
                        <a href="javascript:;" class="dropdown-item" on-click="@global.alert('Separated link')">Separated link</a>
                        <a href="javascript:;" class="dropdown-item" on-click="@global.alert('Another separated link')">Another separated link</a>
                    </div>
                </div>
            </div>            
            <div class="col-sm-4">
                <label>Dropdown with ul &gt; li &gt; a structure</label>
                <div class="dropdown mb-2 mb-0-sm" as-popper="{placement: 'bottom-start'}">
                    <button class="btn btn-secondary dropdown-toggle" popper-trigger type="button">
                        Secondary <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" popper>
                        <li><a href="javascript:;" class="dropdown-item" on-click="@global.alert('Action')">Action</a></li>
                        <li><a href="javascript:;" class="dropdown-item" on-click="@global.alert('Another action')">Another action</a></li>
                        <li><a href="javascript:;" class="dropdown-item" on-click="@global.alert('Something else here')">Something else here</a></li>
                        <li><div class="dropdown-divider"></div></li>
                        <li><a href="javascript:;" class="dropdown-item" on-click="@global.alert('Separated link')">Separated link</a></li>
                        <li><a href="javascript:;" class="dropdown-item" on-click="@global.alert('Another separated link')">Another separated link</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-sm-4">
            </div>
        </div>

        <div class="row mb40">
            <div class="col-sm-12">
                <h2>Features at a glance</h2>
                <ul>
                    <li>Lightweight, minified version is &lt; <strong>6kb</strong></li>
                    <li>Features navigation for Bootstrap 4 dropdowns using the arrow keys</li>
                    <li>Arrows navigation works with both &gt; li &gt; a structure and div &gt; a dropdown structure</li>
                    <li>Raises events - popper_before_open, popper_open, popper_before_close, popper_close</li>
                    <li>Popper closeable by clicking anywhere on the screen or by hitting the esc key</li>
                </ul>
            </div>
        </div>

        <div class="row mb40">
            <div class="col-sm-12">
                <h2>Install</h2>
                <h5 class="pb-2">
                    ractive-decorators-popper requires <a href="https://github.com/FezVrasta/popper.js#installation" target="_blank">popper.js</a> to be installed first.
                </h5>
                <h4 class="pb-2">ractive-decorators-popper is a UMD module so you can use it as an ES2015, AMD, CommonJS module or a global (RactiveDecoratorsPopper)</h4>
                <h5>ES2015</h5>
                <pre>
                    <code class="language-js">
                        npm install ractive-decorators-popper --save
                        import RactiveDecoratorsPopper from 'ractive-decorators-popper';
                    </code>
                </pre>
                <h5>Global - download the repo, extract dist/ractive-decorators-popper.min.js and include it in your page</h5>
                <pre>
                    <code class="language-html">
                        &lt;script type="text/javascript" src="ractive-decorators-popper.min.js"&gt;&lt;/script&gt;
                    </code>
                </pre>
            </div>
        </div>

        <div class="row mb40">
            <div class="col-sm-12">
                <h2>Basic usage</h2>
                <h5>Make ractive-decorators-popper available to all Ractive instances</h5>
                <pre>
                    <code class="language-js">
                        Ractive.decorators.popper = RactiveDecoratorsPopper;
                    </code>
                </pre>

                <h5>or add the ractive-decorators-popper to your Ractive instance</h5>
                <pre>
                    <code class="language-js">
                        var ractive = new Ractive({
                            ...
                            decorators: {
                                popper: RactiveDecoratorsPopper
                            },
                            data: {
                                ...
                            }
                        });
                    </code>
                </pre>

                <h5>then in your template</h5>
                <pre>
                    <code class="language-html" as-code>
                    <!--
                        <div class="dropdown" as-popper="{placement: 'bottom-start'}">
                            <button class="btn btn-primary dropdown-toggle" popper-trigger type="button">
                                Primary <span class="caret"></span>
                            </button>
                            <div class="dropdown-menu" popper>
                                <a href="#" class="dropdown-item">Action</a>
                                <a href="#" class="dropdown-item">Another action</a>
                                <a href="#" class="dropdown-item">Something else here</a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item">Separated link</a>
                                <a href="#" class="dropdown-item">Another separated link</a>
                            </div>
                        </div>
                    -->
                    </code>
                </pre>

                <div class="alert alert-info" role="alert">
                    <strong>HTML structure for the decorator:</strong><br>
                    <ol>
                        <li>You must assign the ractive-decorators-popover decorator in an outer element that includes both the trigger and the popper element</li>
                        <li>you must place a <span class="badge badge-light" style="font-size: 1rem">popper-trigger</span> attribute on the element that triggers the popper</li>
                        <li>and a <span class="badge badge-light" style="font-size: 1rem">popper</span> attribute on the element you want to position (i.e the popper element)</li>
                    </ol>
                </div>

                <h5>Example</h5>
                <div class="dropdown" as-popper="{placement: 'bottom-start'}">
                    <button class="btn btn-primary dropdown-toggle" popper-trigger type="button">
                       Primary <span class="caret"></span>
                    </button>
                    <div class="dropdown-menu" popper>
                        <a href="#" class="dropdown-item">Action</a>
                        <a href="#" class="dropdown-item">Another action</a>
                        <a href="#" class="dropdown-item">Something else here</a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">Separated link</a>
                        <a href="#" class="dropdown-item">Another separated link</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb40">
            <div class="col-sm-12">
                <h2>Events</h2>
                <p>ractive-decorators-popper raises 4 events on the <span class="badge badge-light" style="font-size: 1rem">popper</span> element - popper_before_open, popper_open, popper_before_close, popper_close</p>
                <pre>
                <code class="language-html" as-code>
                    <!--
                    <div class="dropdown" as-popper="{placement: 'bottom-start'}">
                        <button class="btn btn-primary dropdown-toggle" popper-trigger type="button">
                            Dropdown with events <span class="caret"></span>
                        </button>
                        <div class="dropdown-menu" 
                            popper 
                            on-popper_before_open="@global.alert('popper_before_open fired')"
                            on-popper_open="@global.alert('popper_open fired')"
                            on-popper_before_close="@global.alert('popper_before_close fired')"
                            on-popper_close="@global.alert('popper_close fired')"
                        >
                            <a href="#" class="dropdown-item">Action</a>
                            <a href="#" class="dropdown-item">Another action</a>
                            <a href="#" class="dropdown-item">Something else here</a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">Separated link</a>
                            <a href="#" class="dropdown-item">Another separated link</a>
                        </div>
                    </div>
                    -->
                </code>
                </pre>
                <h5>Example</h5>
                <p>This is a popper dropdown that has all events attached</p>
                <div class="dropdown" as-popper="{placement: 'bottom-start'}">
                    <button class="btn btn-primary dropdown-toggle" popper-trigger type="button">
                        Dropdown with events <span class="caret"></span>
                    </button>
                    <div class="dropdown-menu" 
                        popper 
                        on-popper_before_open="@global.alert('popper_before_open fired')"
                        on-popper_open="@global.alert('popper_open fired')"
                        on-popper_before_close="@global.alert('popper_before_close fired')"
                        on-popper_close="@global.alert('popper_close fired')"
                    >
                        <a href="#" class="dropdown-item">Action</a>
                        <a href="#" class="dropdown-item">Another action</a>
                        <a href="#" class="dropdown-item">Something else here</a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">Separated link</a>
                        <a href="#" class="dropdown-item">Another separated link</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb40">
            <div class="col-sm-12">
                <h2 class="mb-3">Bootstrap Popover Example</h2>
                <div class="alert alert-info" role="alert">
                    <p class="mb-0">
                        For Bootstrap popover some additional CSS styles are needed.<br />
                        You also need to set the popover option to true and the modifiers.arrow.element to ".arrow", as shown in the example below.
                    </p>
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <div as-popper="{placement: 'top', popover: true, modifiers: {arrow: {element: '.arrow'}}}">
                            <button type="button" class="btn btn-secondary" popper-trigger>
                                Popover on top
                            </button>
                            <div class="popover bs-popover-top" role="tooltip" popper>
                                <div class="arrow"></div>
                                <h3 class="popover-header">
                                    Popover title
                                </h3>
                                <div class="popover-body">
                                    And here's some amazing content. It's very engaging. Right?
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div as-popper="{placement: 'right', popover: true, modifiers: {arrow: {element: '.arrow'}}}">
                            <button type="button" class="btn btn-secondary" popper-trigger>
                                Popover on right
                            </button>
                            <div class="popover bs-popover-right" role="tooltip" popper>
                                <div class="arrow"></div>
                                <h3 class="popover-header">
                                    Popover title
                                </h3>
                                <div class="popover-body">
                                    And here's some amazing content. It's very engaging. Right?
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div as-popper="{placement: 'bottom', popover: true, modifiers: {arrow: {element: '.arrow'}}}">
                            <button type="button" class="btn btn-secondary" popper-trigger>
                                Popover on bottom
                            </button>
                            <div class="popover bs-popover-bottom" role="tooltip" popper>
                                <div class="arrow"></div>
                                <h3 class="popover-header">
                                    Popover title
                                </h3>
                                <div class="popover-body">
                                    And here's some amazing content. It's very engaging. Right?
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div as-popper="{placement: 'left', popover: true, modifiers: {arrow: {element: '.arrow'}}}">
                            <button type="button" class="btn btn-secondary" popper-trigger>
                                Popover on left
                            </button>
                            <div class="popover bs-popover-left" role="tooltip" popper>
                                <div class="arrow"></div>
                                <h3 class="popover-header">
                                    Popover title
                                </h3>
                                <div class="popover-body">
                                    And here's some amazing content. It's very engaging. Right?
                                </div>
                            </div>
                        </div>
                    </div>                  
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <div as-popper="{placement: 'top', popover: true, click_to_close: false, modifiers: {arrow: {element: '.arrow'}}}">
                            <button type="button" class="btn btn-lg btn-danger" popper-trigger>
                                Popover that doesn't close when clicked inside
                            </button>
                            <div class="popover bs-popover-top" role="tooltip" popper>
                                <div class="arrow"></div>
                                <h3 class="popover-header">
                                    Click inside me
                                </h3>
                                <div class="popover-body">
                                    <p>
                                        See? Nothing happens!
                                    </p>
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas tincidunt rutrum magna sit amet ullamcorper.
                                    </p>
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas tincidunt rutrum magna sit amet ullamcorper. Duis rutrum, est non volutpat tempus, tortor urna vulputate felis, vel luctus felis quam at justo.
                                    </p>
                                    <button type="button" class="btn btn-sm btn-secondary" on-click="@global.alert('Clicked!')">Click me!</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <pre>
                    <code class="language-html" as-code>
                    <!--
                    <style>
                        .popover[popper] {display: none;}
                        .popover[popper].show {display: block;}
                    </style>
                    -->
                    </code>
                </pre>

                <pre>
                    <code class="language-html" as-code>
                        <!--
                        <div as-popper="{placement: 'top', popover: true, modifiers: {arrow: {element: '.arrow'}}}">
                            <button type="button" class="btn btn-secondary" popper-trigger>
                                Popover on top
                            </button>
                            <div class="popover bs-popover-top" role="tooltip" popper>
                                <div class="arrow"></div>
                                <h3 class="popover-header">
                                    Popover title
                                </h3>
                                <div class="popover-body">
                                    And here's some amazing content. It's very engaging. Right?
                                </div>
                            </div>
                        </div>
                        -->
                    </code>
                </pre>
            </div>
        </div>



        <div class="row mb40">
            <div class="col-sm-12">
                <h2>Options</h2>
                <p>
                    ractive-decorators-popper takes one options Object as an optional parameter.<br />
                    The options Object takes all available <a href="https://popper.js.org/popper-documentation.html#Popper.Defaults" target="_blank">popper.js</a> options and then some more.
                </p>

                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Option</th>
                            <th>Description</th>
                            <th>Type</th>
                            <th>Default</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>click_to_close</td>
                            <td>Controls whether the popper element should hide by clicking inside it</td>
                            <td>Boolean</td>
                            <td>true</td>
                        </tr>
                        <tr>
                            <td>enable_arrows</td>
                            <td>Enables / disables navigation on dropdowns with the arrow keys</td>
                            <td>Boolean</td>
                            <td>true</td>
                        </tr>
                        <tr>
                            <td>popover</td>
                            <td>When set to true, some additional logic takes place in order to take care of Bootstrap position classes for popovers</td>
                            <td>Boolean</td>
                            <td>false</td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div>

        <div class="row mb40">
            <div class="col-sm-12">
                <h2>Changelog</h2>

                <h5>version 1.0.0</h5>
                <ul>
                    <li>Initial release</li>
                </ul>

            </div>
        </div>

    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/normalize-whitespace/prism-normalize-whitespace.min.js"></script>
    <script src="https://unpkg.com/popper.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ractive"></script>
    <script src="../dist/ractive-decorators-popper.js"></script>

    <script type="text/javascript">
        function findComments(el) {
            var arr = [];
            for(var i = 0; i < el.childNodes.length; i++) {
                var node = el.childNodes[i];
                if(node.nodeType === 8) {
                    arr.push(node);
                } else {
                    arr.push.apply(arr, findComments(node));
                }
            }
            return arr;
        };

        Ractive.decorators.code = function(node){
            var comments = findComments(node);
            for (var i = 0; i < comments.length; i++) {
                node.appendChild(document.createTextNode(comments[i].nodeValue));
            };
            Prism.highlightElement(node);
            return {
                teardown: function(){
                }
            }        
        }

        Ractive.decorators.prism = function(node){
            Prism.highlightElement(node);
            return {
                teardown: function(){
                }
            }        
        }

        Ractive.decorators.popper = RactiveDecoratorsPopper;

        var ractive = new Ractive({
            stripComments: false,
            target: '#app',
            template: '#app-template',
            data: {
            },
            oncomplete: function(){
                Prism.highlightAll();
            }
        });
    </script>

  </body>
</html>